class LinkPurpose{constructor(s){const n={domain:!(LinkPurpose.version="1.0.0"),watch:!0,roots:"body",shadowComponents:!1,hideIcon:"",ignore:"",noRunIfPresent:!1,noRunIfAbsent:!1,baseSelector:"a[href]",baseLinkClass:"link-purpose",baseIconWrapperClass:"link-purpose-icon",noBreakClass:"link-purpose-nobreak",hiddenTextClass:!1,noReferrer:!1,purposes:{external:{selector:'[href*="://"], [href^="//"]',additionalSelector:!1,message:"(Link is external)",priority:10,linkClass:"link-purpose-external",iconWrapperClass:"link-purpose-external-icon",iconType:"html",iconPosition:"beforeend",iconHTML:'<svg class="linkpurpose-default-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="Currentcolor" d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"/></svg>',iconClasses:["fa-solid","fa-up-right-from-square"]},document:{selector:"[href$='.pdf'], [href*='.pdf?'], [href$='.doc'], [href$='.docx'], [href*='.doc?'], [href*='.docx?'], [href$='.ppt'], [href$='.pptx'], [href*='.ppt?'], [href*='.pptx?'], [href^='https://docs.google']",message:"(Link opens document)",priority:50,linkClass:"link-purpose-document",iconWrapperClass:"link-purpose-document-icon",iconType:"html",iconPosition:"beforeend",iconHTML:'<svg class="linkpurpose-default-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 384 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="Currentcolor" d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H120zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24H264c13.3 0 24-10.7 24-24s-10.7-24-24-24H120z"/></svg>',iconClasses:["fa-regular","fa-file-lines"]},mail:{selector:'[href^="mailto:"]',message:"(Link sends Email)",priority:100,linkClass:"link-purpose-mailto",iconWrapperClass:"link-purpose-mail-icon",iconType:"html",iconPosition:"beforeend",iconHTML:'<svg class="linkpurpose-default-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="Currentcolor" d="M64 112c-8.8 0-16 7.2-16 16v22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16H64zM48 212.2V384c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64H448c35.3 0 64 28.7 64 64V384c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128z"/></svg>',iconClasses:["fa-regular","fa-envelope"]},tel:{selector:'[href^="tel:"]',message:"(Link opens phone)",priority:100,linkClass:"link-purpose-tel",iconWrapperClass:"link-purpose-tel-icon",iconType:"html",iconPosition:"beforeend",iconHTML:'<svg class="linkpurpose-default-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="Currentcolor" d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm90.7 96.7c9.7-2.6 19.9 2.3 23.7 11.6l20 48c3.4 8.2 1 17.6-5.8 23.2L168 231.7c16.6 35.2 45.1 63.7 80.3 80.3l20.2-24.7c5.6-6.8 15-9.2 23.2-5.8l48 20c9.3 3.9 14.2 14 11.6 23.7l-12 44C336.9 378 329 384 320 384C196.3 384 96 283.7 96 160c0-9 6-16.9 14.7-19.3l44-12z"/></svg>',iconClasses:["fa-solid","fa-square-phone"]},newWindow:{selector:'[target="_blank"]',message:"(New window)",priority:0,linkClass:"link-purpose-window",iconWrapperClass:"link-purpose-window-icon",iconType:"html",iconPosition:"beforeend",iconHTML:'<svg class="linkpurpose-default-svg" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path fill="Currentcolor" d="M432 48H208c-17.7 0-32 14.3-32 32V96H128V80c0-44.2 35.8-80 80-80H432c44.2 0 80 35.8 80 80V304c0 44.2-35.8 80-80 80H416V336h16c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32zM48 448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V256H48V448zM64 128H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192c0-35.3 28.7-64 64-64z"/></svg>',iconClasses:["fa-regular","fa-window-restore"]}}};var e;e=()=>{if(LinkPurpose.options={...n,...s},"object"==typeof s&&"purposes"in s)for(const o in n.purposes)o in s.purposes?(LinkPurpose.options.purposes[o]={...n.purposes[o],...s.purposes[o]},o in LinkPurpose.options.purposes&&!("priority"in LinkPurpose.options.purposes[o])&&(LinkPurpose.options.purposes[o].priority=50)):LinkPurpose.options.purposes[o]=n.purposes[o];if(LinkPurpose.ignore=LinkPurpose.options.ignore?`:not(${LinkPurpose.options.ignore}, .${LinkPurpose.options.baseLinkClass})`:`:not(.${LinkPurpose.options.baseLinkClass})`,LinkPurpose.options.purposes.external.selector&&LinkPurpose.options.domain){var e=LinkPurpose.options.domain.split(",");let s="";e.forEach((e,o)=>{0===e.indexOf("*")?s+=`[href*="${LinkPurpose.options.domain.replace("*","")}"]`:-1===e.indexOf("//")?(0<o&&(s+=", "),s+=`[href*="https://${LinkPurpose.options.domain}"], [href*="http://${LinkPurpose.options.domain}"], [href^="//${LinkPurpose.options.domain}"]`):s+=`[href*="${LinkPurpose.options.domain}"]`}),LinkPurpose.options.purposes.external.selector=`:is(${LinkPurpose.options.purposes.external.selector}):not(${s})`}LinkPurpose.run()},"complete"===document.readyState?e():window.addEventListener("load",e),LinkPurpose.findLinks=function(){if(LinkPurpose.links=[],LinkPurpose.noRun=!(!LinkPurpose.options.noRunIfAbsent||null!==document.querySelector(`:is(${LinkPurpose.options.noRunIfAbsent})`)),!LinkPurpose.noRun&&LinkPurpose.options.noRunIfPresent&&(LinkPurpose.noRun=null!==document.querySelector(`:is(${LinkPurpose.options.noRunIfPresent})`)),!LinkPurpose.noRun){var e=LinkPurpose.options.shadowComponents?", "+LinkPurpose.options.shadowComponents:"";const o=`:is(${LinkPurpose.options.baseSelector}${e})`+LinkPurpose.ignore;e=document.querySelectorAll(LinkPurpose.options.roots);if(e&&(LinkPurpose.options.watch&&!LinkPurpose.options.watching&&(e.forEach(e=>{LinkPurpose.startObserver(e)}),LinkPurpose.options.watching=!0),e.forEach(e=>{LinkPurpose.links=LinkPurpose.links.concat(Array.from(e.querySelectorAll(o)))}),LinkPurpose.options.shadowComponents)){var s=`:is(${LinkPurpose.options.baseSelector})`+LinkPurpose.options.ignore;for(let o=LinkPurpose.links.length-1;0<=o;o--)if(LinkPurpose.links[o].matches(LinkPurpose.options.shadowComponents)){let e;"object"==typeof(e=LinkPurpose.links[o].shadowRoot?LinkPurpose.links[o].shadowRoot.querySelectorAll(s):e)&&0<e.length?LinkPurpose.links.splice(o,1,...e):(console.warn("Link Purpose: A specified shadow host has no shadowRoot."),LinkPurpose.links.splice(o,1))}}}},LinkPurpose.processLinks=function(){LinkPurpose.marks=[],LinkPurpose.links&&LinkPurpose.links.forEach(e=>{var o,s,n,i=[];let t=!1;for([o,s]of Object.entries(LinkPurpose.options.purposes))s.selector&&(e.matches(""+s.selector)||s.additionalSelector&&e.matches(""+s.additionalSelector))&&("newWindow"===o?t=!0:0===i.length?i.push({type:o,noReferrer:"external"===o&&LinkPurpose.options.noReferrer}):s.priority>LinkPurpose.options.purposes[i[0].type].priority&&(i[0]={type:o,noReferrer:"external"===o&&LinkPurpose.options.noReferrer}));t&&i.push({type:"newWindow",noReferrer:!1}),0!==i.length&&(n=!(LinkPurpose.options.hideIcon&&e.matches(LinkPurpose.options.hideIcon)),LinkPurpose.marks.push({link:e,hits:i,showIcon:n}))})},LinkPurpose.markLinks=function(){LinkPurpose.marks&&LinkPurpose.marks.forEach(p=>{p.hits.forEach((e,i)=>{if(0===i){let n=p.link;if(e.noReferrer&&p.link.setAttribute("rel","noreferrer"),p.showIcon){if(p.link.classList.add(LinkPurpose.options.baseLinkClass,LinkPurpose.options.purposes[e.type].linkClass),"beforeend"===LinkPurpose.options.purposes[e.type].iconPosition){let e=p.link.lastChild,o=!1,s=p.link;for(;e;)if(e.lastChild)e=(s=e).lastChild;else{if("#text"!==e.nodeName||!s.lastElementChild||0!==e.textContent.trim().length)break;o=e,s=s.lastElementChild,e=s.lastChild}var t;e&&"#text"===e.nodeName&&0<e.textContent.length&&null!==(r=(i=e.textContent).match(/\S+\s*$/g))&&((t=document.createElement("span")).classList.add(LinkPurpose.options.noBreakClass),t.textContent=r[0],o&&(t.append(o.textContent),o.textContent=""),e.textContent=i.substring(0,i.length-r[0].length),e.parentNode.append(t),n=t)}const o=document.createElement("span");o.classList.add(LinkPurpose.options.baseIconWrapperClass,LinkPurpose.options.purposes[e.type].iconWrapperClass),"html"===LinkPurpose.options.purposes[e.type].iconType?o.innerHTML=LinkPurpose.options.purposes[e.type].iconHTML:"classes"===LinkPurpose.options.purposes[e.type].iconType&&LinkPurpose.options.purposes[e.type].iconClasses.forEach(e=>{o.classList.add(e)}),n.insertAdjacentElement(LinkPurpose.options.purposes[e.type].iconPosition,o)}else p.link.classList.add(LinkPurpose.options.baseLinkClass);i=document.createElement("span");i.classList.add("link-purpose-text"),LinkPurpose.options.hiddenTextClass&&i.classList.add(LinkPurpose.options.hiddenTextClass),i.textContent=LinkPurpose.options.purposes[e.type].message,n.append(i)}else{var r=p.link.querySelector(".link-purpose-text");r.classList.add(LinkPurpose.options.purposes[e.type].iconWrapperClass),r.textContent=r.textContent+LinkPurpose.options.purposes[e.type].message}})})},LinkPurpose.run=()=>{LinkPurpose.findLinks(),LinkPurpose.processLinks(),LinkPurpose.markLinks()},LinkPurpose.startObserver=function(e){LinkPurpose.mutated=((o,s)=>{let n=null;return(...e)=>{window.clearTimeout(n),n=window.setTimeout(()=>{o.apply(null,e)},s)}})(()=>{LinkPurpose.run()},500);new MutationObserver((e,o)=>{for(const s of e)"childList"===s.type&&s.addedNodes.length&&LinkPurpose.mutated()}).observe(e,{childList:!0,subtree:!0})}}}